CC = gcc

PROGS_FILENAME = app
TASKS_FILENAME = prog

PROGS_EXE_FIENAME = prog
TASK_EXE_FILENAME = app

APP_DIR = target
SUB_PROGS_DIR = apps

.PHONY: all clean

all: $(TASKS_FILENAME)1 $(TASKS_FILENAME)2 $(TASKS_FILENAME)3 $(TASKS_FILENAME)4

$(TASKS_FILENAME)1: $(APP_DIR) $(TASKS_FILENAME)1.c
	$(CC) $@.c -o $</$(TASK_EXE_FILENAME)1.exe

$(TASKS_FILENAME)2: $(APP_DIR) $(TASKS_FILENAME)2.c
	$(CC) $@.c -o $</$(TASK_EXE_FILENAME)2.exe

$(TASKS_FILENAME)3: $(APP_DIR) $(TASKS_FILENAME)3.c
	$(CC) $(SUB_PROGS_DIR)/$(PROGS_FILENAME)1.c -o $</$(PROGS_EXE_FIENAME)1.exe -lm
	$(CC) $(SUB_PROGS_DIR)/$(PROGS_FILENAME)2.c -o $</$(PROGS_EXE_FIENAME)2.exe -lm
	$(CC) $@.c -o $</$(TASK_EXE_FILENAME)3.exe

$(TASKS_FILENAME)4: $(APP_DIR) $(TASKS_FILENAME)4.c
	$(CC) $(TASKS_FILENAME)4.c -o $</$(TASK_EXE_FILENAME)4.exe

$(TASKS_FILENAME)5: $(APP_DIR) $(TASKS_FILENAME)5.c
	$(CC) $@.c -o $</$(TASK_EXE_FILENAME)5.exe

$(APP_DIR):
	@mkdir -p $@

clean:
	rm -rf $(APP_DIR) *.exe
