CC = gcc

PROGS_FILENAME = app
TASKS_FILENAME = prog

PROGS_EXE_FILENAME = prog
TASK_EXE_FILENAME = app

APP_DIR = target
SUB_PROGS_DIR = apps

.PHONY: all clean

all: $(TASKS_FILENAME)1 $(TASKS_FILENAME)2 $(TASKS_FILENAME)3 $(TASKS_FILENAME)4 #$(TASKS_FILENAME)5

$(TASKS_FILENAME)1: $(APP_DIR)/$(TASK_EXE_FILENAME)1.exe
	

$(TASKS_FILENAME)2: $(APP_DIR)/$(TASK_EXE_FILENAME)2.exe
	

$(TASKS_FILENAME)3: $(APP_DIR)/$(TASK_EXE_FILENAME)3.exe
	

$(TASKS_FILENAME)4: $(APP_DIR)/$(TASK_EXE_FILENAME)4.exe
	

$(TASKS_FILENAME)5: $(APP_DIR)/$(TASK_EXE_FILENAME)5.exe
	

# Правила для сборки .exe файлов
$(APP_DIR)/$(TASK_EXE_FILENAME)1.exe: $(TASKS_FILENAME)1.c | $(APP_DIR)
	$(CC) $< -o $@

$(APP_DIR)/$(TASK_EXE_FILENAME)2.exe: $(TASKS_FILENAME)2.c | $(APP_DIR)
	$(CC) $< -o $@

$(APP_DIR)/$(TASK_EXE_FILENAME)3.exe: $(TASKS_FILENAME)3.c $(SUB_PROGS_DIR)/$(PROGS_FILENAME)1.c $(SUB_PROGS_DIR)/$(PROGS_FILENAME)2.c | $(APP_DIR)
	$(CC) $(SUB_PROGS_DIR)/$(PROGS_FILENAME)1.c -o $(APP_DIR)/$(PROGS_EXE_FILENAME)1.exe -lm
	$(CC) $(SUB_PROGS_DIR)/$(PROGS_FILENAME)2.c -o $(APP_DIR)/$(PROGS_EXE_FILENAME)2.exe -lm
	$(CC) $< -o $@

$(APP_DIR)/$(TASK_EXE_FILENAME)4.exe: $(TASKS_FILENAME)4.c | $(APP_DIR)
	$(CC) $< -o $@

$(APP_DIR)/$(TASK_EXE_FILENAME)5.exe: $(TASKS_FILENAME)5.c | $(APP_DIR)
	$(CC) $< -o $@

$(APP_DIR):
	@mkdir -p $@

clean:
	rm -rf $(APP_DIR) *.exe
